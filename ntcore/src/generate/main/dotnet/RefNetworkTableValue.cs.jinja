// Copyright (c) FIRST and other WPILib contributors.
// Open Source Software; you can modify and/or share it under the terms of
// the WPILib BSD license file in the root directory of this project.

// THIS FILE WAS AUTO-GENERATED BY ./ntcore/generate_topics.py. DO NOT MODIFY

using System;
using NetworkTables.Natives;

namespace NetworkTables;

/// <summary>
/// A NetworkTable entry value used for write purposes
/// </summary>
public readonly ref partial struct RefNetworkTableValue
{
{% for t in types %}
{% if t.dotnet.IsArray %}
    internal readonly ReadOnlySpan<{{ t.dotnet.BaseType }}> m_{{ t.dotnet.BaseType }}Span;

    internal RefNetworkTableValue(ReadOnlySpan<{{ t.dotnet.BaseType }}> value)
    {
        Type = NetworkTableType.{{ t.TypeName }};
        Time = NtCore.Now();
        m_{{ t.dotnet.BaseType }}Span = value;
    }

    internal RefNetworkTableValue(ReadOnlySpan<{{ t.dotnet.BaseType }}> value, long time)
    {
        Type = NetworkTableType.{{ t.TypeName }};
        Time = time;
        m_{{ t.dotnet.BaseType }}Span = value;
    }

    /// <summary>
    /// Creates a {{ t.dotnet.ValueType }} value.
    /// </summary>
    /// <param name="value">the value</param>
    /// <returns>The entry value</returns>
    public static RefNetworkTableValue Make{{ t.TypeName }}(ReadOnlySpan<{{ t.dotnet.BaseType }}> value)
    {
        return new RefNetworkTableValue(value);
    }

    /// <summary>
    /// Creates a {{ t.dotnet.ValueType }} value.
    /// </summary>
    /// <param name="value">the value</param>
    /// <param name="time">the creation time to use (instead of the current time)</param>
    /// <returns>The entry value</returns>
    public static RefNetworkTableValue Make{{ t.TypeName }}(ReadOnlySpan<{{ t.dotnet.BaseType }}> value, long time)
    {
        return new RefNetworkTableValue(value, time);
    }
{% elif t.TypeName == "String" %}
    internal readonly string? m_stringValue;

    internal RefNetworkTableValue({{ t.dotnet.ValueType }} value)
    {
        Type = NetworkTableType.{{ t.TypeName }};
        Time = NtCore.Now();
        m_stringValue = value;
    }
    internal RefNetworkTableValue({{ t.dotnet.ValueType }} value, long time)
    {
        Type = NetworkTableType.{{ t.TypeName }};
        Time = time;
        m_stringValue = value;
    }

    internal RefNetworkTableValue(ReadOnlySpan<byte> value, bool isString)
    {
        Type = NetworkTableType.String;
        Time = NtCore.Now();
        m_byteSpan = value;
    }

    internal RefNetworkTableValue(ReadOnlySpan<byte> value, long time, bool isString)
    {
        Type = NetworkTableType.String;
        Time = time;
        m_byteSpan = value;
    }

    /// <summary>
    /// Creates a {{ t.dotnet.ValueType }} value.
    /// </summary>
    /// <param name="value">the value</param>
    /// <returns>The entry value</returns>
    public static RefNetworkTableValue Make{{ t.TypeName }}({{ t.dotnet.ValueType }} value)
    {
        return new RefNetworkTableValue(value);
    }

    /// <summary>
    /// Creates a {{ t.dotnet.ValueType }} value.
    /// </summary>
    /// <param name="value">the value</param>
    /// <param name="time">the creation time to use (instead of the current time)</param>
    /// <returns>The entry value</returns>
    public static RefNetworkTableValue Make{{ t.TypeName }}({{ t.dotnet.ValueType }} value, long time)
    {
        return new RefNetworkTableValue(value, time);
    }

    /// <summary>
    /// Creates a {{ t.dotnet.ValueType }} value from a UFT8 string.
    /// </summary>
    /// <param name="value">the value</param>
    /// <returns>The entry value</returns>
    public static RefNetworkTableValue Make{{ t.TypeName }}(ReadOnlySpan<byte> value)
    {
        return new RefNetworkTableValue(value);
    }

    /// <summary>
    /// Creates a {{ t.dotnet.ValueType }} value from a UFT8 string.
    /// </summary>
    /// <param name="value">the value</param>
    /// <param name="time">the creation time to use (instead of the current time)</param>
    /// <returns>The entry value</returns>
    public static RefNetworkTableValue Make{{ t.TypeName }}(ReadOnlySpan<byte> value, long time)
    {
        return new RefNetworkTableValue(value, time);
    }
{% else %}
    internal RefNetworkTableValue({{ t.dotnet.ValueType }} value)
    {
        Type = NetworkTableType.{{ t.TypeName }};
        Time = NtCore.Now();
        m_structValue = new(value);
    }
    internal RefNetworkTableValue({{ t.dotnet.ValueType }} value, long time)
    {
        Type = NetworkTableType.{{ t.TypeName }};
        Time = time;
        m_structValue = new(value);
    }

    /// <summary>
    /// Creates a {{ t.dotnet.ValueType }} value.
    /// </summary>
    /// <param name="value">the value</param>
    /// <returns>The entry value</returns>
    public static RefNetworkTableValue Make{{ t.TypeName }}({{ t.dotnet.ValueType }} value)
    {
        return new RefNetworkTableValue(value);
    }

    /// <summary>
    /// Creates a {{ t.dotnet.ValueType }} value.
    /// </summary>
    /// <param name="value">the value</param>
    /// <param name="time">the creation time to use (instead of the current time)</param>
    /// <returns>The entry value</returns>
    public static RefNetworkTableValue Make{{ t.TypeName }}({{ t.dotnet.ValueType }} value, long time)
    {
        return new RefNetworkTableValue(value, time);
    }
{% endif -%}
{% endfor %}
}
